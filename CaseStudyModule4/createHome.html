<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function createHome(){
            let name  = $('#name').val();
            let price  = $('#price').val();
            let type_home  = $('#type_home').val();
            let type_room  = $('#type_room').val();
            let address  = $('#address').val();
            let num_bedroom  = $('#num_bedroom').val();
            let num_bathroom  = $('#num_bathroom').val();
            let home = {

            }
            $.ajax({

            })
        }
        function showFormCreateImg() {
            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "GET",
                url: "http://localhost:8080/api/homes",
                success: function (data) {
                    console.log("thành công")
                    let str = "";
                    str += "<form enctype=\"multipart/form-data\" id=\"add-image\">\n" +
                        "    <table class='table table-striped'>\n" +
                        "        <tr>\n" +
                        "            <td>Image:</td>\n" +
                        "            <td><input type=\"file\" name=\"image\" placeholder=\"image\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>Home:</td>\n" +
                        "            <td><select name='home'> ";
                    for (let i = 0; i < data.length; i++) {
                        str += "<option value='" + data[i].id + "'>" + data[i].home_Name + "</option>"
                    }
                    str += "</select>";
                    str +=
                        " </td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td></td>\n" +
                        "            <td><button class='btn btn-success' type=\"button\" onclick=\"addNewImage()\">SAVE</button></td>\n" +
                        "        </tr>\n" +
                        "    </table>\n" +
                        "</form>";
                    document.getElementById('main').innerHTML = str;
                }
            })
        }
        function addNewImage() {
            let form = document.getElementById("add-image");
            let data = new FormData(form);
            $.ajax({
                type: "POST",
                enctype: 'multipart/form-data',
                url: "http://localhost:8080/api/images/rest/upload",
                data: data,
                processData: false,
                contentType: false,
                cache: false,
                timeout: 1000000,
                success: window.location.href = "home.html"

            });
            event.preventDefault();
        }
        function showFormCreateHome() {

            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "GET",
                url: "http://localhost:8080/api/homes",
                success: function (data) {
                    let str = "";
                    str += "<form id=\"add-home\">\n" +
                        "    <table class='table table-striped'>\n" +
                        "        <tr>\n" +
                        "            <td>Home_name:</td>\n" +
                        "            <td><input type=\"text\" id=\"home_name\" placeholder=\"Home_name\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>Type_home:</td>\n" +
                        "            <td><input type=\"text\" id=\"type_home\" placeholder=\"Type_home\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>Type_room:</td>\n" +
                        "            <td><input type=\"text\" id=\"type_room\" placeholder=\"Type_room\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>address:</td>\n" +
                        "            <td><input type=\"text\" id=\"address\" placeholder=\"address\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>Description:</td>\n" +
                        "            <td><input type=\"text\" id=\"description\" placeholder=\"description\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>num_bedroom:</td>\n" +
                        "            <td><input type=\"text\" id=\"num_bedroom\" placeholder=\"num_bedroom\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>num_bathroom:</td>\n" +
                        "            <td><input type=\"text\" id=\"num_bathroom\" placeholder=\"num_bathroom\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td>price:</td>\n" +
                        "            <td><input type=\"text\" id=\"price\" placeholder=\"price\"></td>\n" +
                        "        </tr>\n" +
                        "        <tr>\n" +
                        "            <td></td>\n" +
                        "            <td><button class='btn btn-success' type=\"button\" onclick=\"addNewHome()\">SAVE</button></td>\n" +
                        "        </tr>\n" +
                        "    </table>\n" +
                        "</form>";
                    document.getElementById('main').innerHTML = str;
                }
            })
        }
        function addNewHome() {
            let home_name = $('#home_name').val();
            let type_room = $('#type_room').val();
            let type_home = $('#type_home').val();
            let address = $('#address').val();
            let description = $('#description').val();
            let num_Bedroom = $('#num_Bedroom').val();
            let num_Bathroom = $('#num_Bathroom').val();
            let price = $('#price').val();
            let newHome = {
                home_Name: home_name,
                type_Room: type_room,
                type_Home: type_home,
                address : address ,
                description: description,
                num_Bedroom: num_Bedroom,
                num_Bathroom: num_Bathroom,
                price: price
            };

            $.ajax({
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                type: "POST",
                data: JSON.stringify(newHome),
                url: "http://localhost:8080/api/homes",
                success: findAll
            });
            event.preventDefault();
        };
        function onloadForm() {
            showFormCreateImg();
        }
    </script>
</head>
<body onload="onloadForm()">

<div class="container">
    <button onclick="showFormCreateHome()">Create Home</button>
    <button onclick="showFormCreateImg()">Back</button>
    <div id="main" ></div>
</div>
</body>
</html>